"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _asyncCrossSpawn = _interopRequireDefault(require("async-cross-spawn"));

var _sample = _interopRequireDefault(require("lodash/sample"));

class Git {
  constructor(accounts = []) {
    this.accounts = accounts;
  }

  getAccount(strategy = 'config') {
    var _this = this;

    return function () {
      var _ref = (0, _asyncToGenerator2.default)(function* (strategy) {
        return {
          config: {
            name: yield (0, _asyncCrossSpawn.default)('git', ['config', '--global', 'user.name']),
            email: yield (0, _asyncCrossSpawn.default)('git', ['config', '--global', 'user.email'])
          },
          random: (0, _sample.default)(_this.accounts)
        }[strategy];
      });

      return function (_x) {
        return _ref.apply(this, arguments);
      };
    }()(strategy);
  }

}

exports.default = Git;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zZXJ2aWNlcy9naXQudHMiXSwibmFtZXMiOlsiR2l0IiwiY29uc3RydWN0b3IiLCJhY2NvdW50cyIsImdldEFjY291bnQiLCJzdHJhdGVneSIsImNvbmZpZyIsIm5hbWUiLCJlbWFpbCIsInJhbmRvbSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFHZSxNQUFNQSxHQUFOLENBQVU7QUFDdkJDLEVBQUFBLFdBQVcsQ0FBUUMsUUFBbUIsR0FBRyxFQUE5QixFQUFrQztBQUFBLFNBQTFCQSxRQUEwQixHQUExQkEsUUFBMEI7QUFBRTs7QUFFL0NDLEVBQUFBLFVBQVUsQ0FBQ0MsUUFBUSxHQUFHLFFBQVosRUFBd0M7QUFBQTs7QUFDaEQsV0FBTztBQUFBLGlEQUFDLFdBQU9BLFFBQVAsRUFBNEI7QUFDbEMsZUFBUTtBQUNOQyxVQUFBQSxNQUFNLEVBQUU7QUFDTkMsWUFBQUEsSUFBSSxRQUFRLDhCQUFnQixLQUFoQixFQUF1QixDQUNqQyxRQURpQyxFQUVqQyxVQUZpQyxFQUdqQyxXQUhpQyxDQUF2QixDQUROO0FBTU5DLFlBQUFBLEtBQUssUUFBUSw4QkFBZ0IsS0FBaEIsRUFBdUIsQ0FDbEMsUUFEa0MsRUFFbEMsVUFGa0MsRUFHbEMsWUFIa0MsQ0FBdkI7QUFOUCxXQURGO0FBYU5DLFVBQUFBLE1BQU0sRUFBRSxxQkFBTyxLQUFJLENBQUNOLFFBQVo7QUFiRixTQUFELENBYzBCRSxRQWQxQixDQUFQO0FBZUQsT0FoQk07O0FBQUE7QUFBQTtBQUFBO0FBQUEsUUFnQkpBLFFBaEJJLENBQVA7QUFpQkQ7O0FBckJzQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBhc3luY0Nyb3NzU3Bhd24gZnJvbSAnYXN5bmMtY3Jvc3Mtc3Bhd24nO1xuaW1wb3J0IHNhbXBsZSBmcm9tICdsb2Rhc2gvc2FtcGxlJztcbmltcG9ydCB7IEFjY291bnQgfSBmcm9tICcuLi90eXBlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdpdCB7XG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBhY2NvdW50czogQWNjb3VudFtdID0gW10pIHt9XG5cbiAgZ2V0QWNjb3VudChzdHJhdGVneSA9ICdjb25maWcnKTogUHJvbWlzZTxBY2NvdW50PiB7XG4gICAgcmV0dXJuIChhc3luYyAoc3RyYXRlZ3k6IHN0cmluZykgPT4ge1xuICAgICAgcmV0dXJuICh7XG4gICAgICAgIGNvbmZpZzoge1xuICAgICAgICAgIG5hbWU6IGF3YWl0IGFzeW5jQ3Jvc3NTcGF3bignZ2l0JywgW1xuICAgICAgICAgICAgJ2NvbmZpZycsXG4gICAgICAgICAgICAnLS1nbG9iYWwnLFxuICAgICAgICAgICAgJ3VzZXIubmFtZSdcbiAgICAgICAgICBdKSxcbiAgICAgICAgICBlbWFpbDogYXdhaXQgYXN5bmNDcm9zc1NwYXduKCdnaXQnLCBbXG4gICAgICAgICAgICAnY29uZmlnJyxcbiAgICAgICAgICAgICctLWdsb2JhbCcsXG4gICAgICAgICAgICAndXNlci5lbWFpbCdcbiAgICAgICAgICBdKVxuICAgICAgICB9LFxuICAgICAgICByYW5kb206IHNhbXBsZSh0aGlzLmFjY291bnRzKVxuICAgICAgfSBhcyB7IFtrZXk6IHN0cmluZ106IEFjY291bnQgfSlbc3RyYXRlZ3ldO1xuICAgIH0pKHN0cmF0ZWd5KTtcbiAgfVxufVxuIl19