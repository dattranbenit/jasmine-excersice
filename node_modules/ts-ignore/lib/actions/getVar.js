"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = getVar;

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _services = require("../services");

const _process = process,
      env = _process.env;

function getVar(_x, _x2, _x3) {
  return _getVar.apply(this, arguments);
}

function _getVar() {
  _getVar = (0, _asyncToGenerator2.default)(function* (config, logger, key) {
    const git = new _services.Git(config.accounts);
    if (!key) return null;

    const _ref = yield git.getAccount(env.CAPTAIN_HOOK_STRATEGY || 'random'),
          email = _ref.email,
          name = _ref.name;

    const result = (key => ({
      git_author_date: 'unknown',
      git_author_email: email,
      git_author_name: name,
      git_committer_date: 'unknown',
      git_committer_email: email,
      git_committer_name: name
    })[key])(key);

    return logger.info(result);
  });
  return _getVar.apply(this, arguments);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9hY3Rpb25zL2dldFZhci50cyJdLCJuYW1lcyI6WyJwcm9jZXNzIiwiZW52IiwiZ2V0VmFyIiwiY29uZmlnIiwibG9nZ2VyIiwia2V5IiwiZ2l0IiwiR2l0IiwiYWNjb3VudHMiLCJnZXRBY2NvdW50IiwiQ0FQVEFJTl9IT09LX1NUUkFURUdZIiwiZW1haWwiLCJuYW1lIiwicmVzdWx0IiwiZ2l0X2F1dGhvcl9kYXRlIiwiZ2l0X2F1dGhvcl9lbWFpbCIsImdpdF9hdXRob3JfbmFtZSIsImdpdF9jb21taXR0ZXJfZGF0ZSIsImdpdF9jb21taXR0ZXJfZW1haWwiLCJnaXRfY29tbWl0dGVyX25hbWUiLCJpbmZvIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUNBOztpQkFFZ0JBLE87TUFBUkMsRyxZQUFBQSxHOztTQUVzQkMsTTs7Ozs7NENBQWYsV0FDYkMsTUFEYSxFQUViQyxNQUZhLEVBR2JDLEdBSGEsRUFJYjtBQUNBLFVBQU1DLEdBQUcsR0FBRyxJQUFJQyxhQUFKLENBQVFKLE1BQU0sQ0FBQ0ssUUFBZixDQUFaO0FBQ0EsUUFBSSxDQUFDSCxHQUFMLEVBQVUsT0FBTyxJQUFQOztBQUZWLHVCQUc4QkMsR0FBRyxDQUFDRyxVQUFKLENBQzVCUixHQUFHLENBQUNTLHFCQUFKLElBQTZCLFFBREQsQ0FIOUI7QUFBQSxVQUdRQyxLQUhSLFFBR1FBLEtBSFI7QUFBQSxVQUdlQyxJQUhmLFFBR2VBLElBSGY7O0FBTUEsVUFBTUMsTUFBTSxHQUFHLENBQUVSLEdBQUQsSUFDYixDQUFDO0FBQ0FTLE1BQUFBLGVBQWUsRUFBRSxTQURqQjtBQUVBQyxNQUFBQSxnQkFBZ0IsRUFBRUosS0FGbEI7QUFHQUssTUFBQUEsZUFBZSxFQUFFSixJQUhqQjtBQUlBSyxNQUFBQSxrQkFBa0IsRUFBRSxTQUpwQjtBQUtBQyxNQUFBQSxtQkFBbUIsRUFBRVAsS0FMckI7QUFNQVEsTUFBQUEsa0JBQWtCLEVBQUVQO0FBTnBCLEtBQUQsRUFPK0JQLEdBUC9CLENBRFksRUFRMEJBLEdBUjFCLENBQWY7O0FBU0EsV0FBT0QsTUFBTSxDQUFDZ0IsSUFBUCxDQUFZUCxNQUFaLENBQVA7QUFDRCxHIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29uZmlnLCBMb2dnZXIgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBHaXQgfSBmcm9tICcuLi9zZXJ2aWNlcyc7XG5cbmNvbnN0IHsgZW52IH0gPSBwcm9jZXNzO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBnZXRWYXIoXG4gIGNvbmZpZzogQ29uZmlnLFxuICBsb2dnZXI6IExvZ2dlcixcbiAga2V5OiBzdHJpbmdcbikge1xuICBjb25zdCBnaXQgPSBuZXcgR2l0KGNvbmZpZy5hY2NvdW50cyk7XG4gIGlmICgha2V5KSByZXR1cm4gbnVsbDtcbiAgY29uc3QgeyBlbWFpbCwgbmFtZSB9ID0gYXdhaXQgZ2l0LmdldEFjY291bnQoXG4gICAgZW52LkNBUFRBSU5fSE9PS19TVFJBVEVHWSB8fCAncmFuZG9tJ1xuICApO1xuICBjb25zdCByZXN1bHQgPSAoKGtleTogc3RyaW5nKSA9PlxuICAgICgoe1xuICAgICAgZ2l0X2F1dGhvcl9kYXRlOiAndW5rbm93bicsXG4gICAgICBnaXRfYXV0aG9yX2VtYWlsOiBlbWFpbCxcbiAgICAgIGdpdF9hdXRob3JfbmFtZTogbmFtZSxcbiAgICAgIGdpdF9jb21taXR0ZXJfZGF0ZTogJ3Vua25vd24nLFxuICAgICAgZ2l0X2NvbW1pdHRlcl9lbWFpbDogZW1haWwsXG4gICAgICBnaXRfY29tbWl0dGVyX25hbWU6IG5hbWVcbiAgICB9IGFzIHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0pW2tleV0pKShrZXkpO1xuICByZXR1cm4gbG9nZ2VyLmluZm8ocmVzdWx0KTtcbn1cbiJdfQ==